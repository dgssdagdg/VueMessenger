"use strict";(self["webpackChunkvue_mesenger"]=self["webpackChunkvue_mesenger"]||[]).push([[80],{1880:function(e,t,s){s.r(t),s.d(t,{default:function(){return Xs}});var i=s(6768),a=s(4232);function o(e,t,s,o,n,c){const r=(0,i.g2)("MessengerLeft"),l=(0,i.g2)("MessengerChat"),h=(0,i.g2)("Notifications");return(0,i.uX)(),(0,i.CE)("div",{class:(0,a.C4)([{"messenger-left-show":c.infoWindow,"_black-mode":c.infoSaitMode},"messenger"])},[(0,i.bF)(r),(0,i.bF)(l),e.$store.state.messeng.showNotification?((0,i.uX)(),(0,i.Wv)(h,{key:0})):(0,i.Q3)("",!0)],2)}var n=s(5130),c=s.p+"img/plus.ed3342f9.svg";const r=e=>((0,i.Qi)("data-v-9f3e6276"),e=e(),(0,i.jt)(),e),l={class:"messenger-left"},h={class:"messenger-left-settings"},d={class:"messenger-left-chats"},u={class:"messenger-left-top"},m=r((()=>(0,i.Lk)("div",{class:"messenger-left-top-title _chats-title"},"Чаты",-1))),p={class:"messenger-left-top-menu"},g=r((()=>(0,i.Lk)("img",{src:c,alt:"plus"},null,-1))),f=[g],C={class:"messenger-left-body"},v={class:"messenger-left-users"},k={class:"messenger-left-users-input"},y=r((()=>(0,i.Lk)("div",{style:{"font-size":"15px",opacity:"0.5"},class:"icon-lupa"},null,-1))),A={key:0,class:"messenger-left-users-input-items"},S={class:"messenger-left-users-block"};function w(e,t,s,o,c,r){const g=(0,i.g2)("my-dropdown"),w=(0,i.g2)("my-input"),L=(0,i.g2)("my-global-users"),b=(0,i.g2)("my-users"),M=(0,i.g2)("CreateChat"),U=(0,i.g2)("UserSetting");return(0,i.uX)(),(0,i.CE)("div",l,[(0,i.Lk)("div",h,[(0,i.Lk)("div",{onClick:t[0]||(t[0]=(...e)=>r.myAlert&&r.myAlert(...e)),class:"messenger-left-settings-item icon-bookmark"}),(0,i.Lk)("div",{onClick:t[1]||(t[1]=(...e)=>r.myAlert&&r.myAlert(...e)),class:"messenger-left-settings-item icon-group-icon"}),(0,i.Lk)("div",{onClick:t[2]||(t[2]=t=>e.$store.commit("SetSaitMode",!1===r.infoSaitMode)),class:"messenger-left-settings-item icon-night-mode"}),(0,i.Lk)("div",{onClick:t[3]||(t[3]=t=>e.$store.commit("SetShowUserSetting",!0)),class:"messenger-left-settings-item icon-setting"})]),(0,i.Lk)("div",d,[(0,i.Lk)("div",u,[m,(0,i.Lk)("div",p,[(0,i.Lk)("div",{onClick:t[4]||(t[4]=(0,n.D$)((e=>c.showChatMenu=!0),["stop"])),class:(0,a.C4)(["messenger-left-top-menu-btn",{"messenger-left-top-menu-btn-active":c.showChatMenu}])},f,2),(0,i.bF)(g,{show:c.showChatMenu,"onUpdate:show":t[5]||(t[5]=e=>c.showChatMenu=e),chatDropDownItems:c.chatDropDownItems,onMyaction:r.openCreateChat},null,8,["show","chatDropDownItems","onMyaction"])])]),(0,i.Lk)("div",C,[(0,i.Q3)("",!0),(0,i.Lk)("div",v,[(0,i.Lk)("div",k,[y,(0,i.bF)(w,{class:(0,a.C4)([{"input-not-empty":""!=r.infoSearchQuery},"inputshow"]),"model-value":r.infoSearchQuery,"onUpdate:modelValue":e.SetSearchQuery,style:{"padding-left":"35px"},placeholder:"Поиск...",onFocus:t[6]||(t[6]=e=>c.showSearchBlock=!0)},null,8,["class","model-value","onUpdate:modelValue"]),r.infoSearchQuery||c.showSearchBlock?((0,i.uX)(),(0,i.CE)("div",A,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.sortedAndSearchedPosts,(e=>((0,i.uX)(),(0,i.Wv)(L,{user:e,key:e.id,onClick:t[7]||(t[7]=e=>c.showSearchBlock=!1)},null,8,["user"])))),128))])):(0,i.Q3)("",!0)]),(0,i.Lk)("div",S,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)([...r.infoMyChats,...r.infoGroups,...r.infoCanals],(e=>((0,i.uX)(),(0,i.Wv)(b,{user:e,key:e.id},null,8,["user"])))),128))])])]),(0,i.bF)(M,{status:c.createChatStatus,"onUpdate:status":t[8]||(t[8]=e=>c.createChatStatus=e),show:c.showCreateChat,"onUpdate:show":t[9]||(t[9]=e=>c.showCreateChat=e),onCreate:r.createGroup},null,8,["status","show","onCreate"]),r.infoShowUserSetting?((0,i.uX)(),(0,i.Wv)(U,{key:0})):(0,i.Q3)("",!0)])])}var L="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAABHNCSVQICAgIfAhkiAAAAiNJREFUSIm9lj9rFFEUxc99OxsF0ayiaSwiEhVNI9j5AUSC0cbCwj/xMwj2YiniFwgEhEQlYGGjICnsgyASVPyDkiKNGgVDRjPv/iz2bljESLI7eGBgmOHd8865c88b6T/AtroAGKyqarQoir2SXkn6KKkyM2rbFXDK3eeAN8AkcAQYALa84Q2Rc77m7t+AVWAZeAAcAJq1kQBn3f2lu5fAGrACTAGjQBNIdZDsBiaARSADHqruAYdqUQQUQXQh+pKBCvgaRMdCUX89AhIwGIreA2UQreacp6JHA31bB1gougp86LJuBbgPHO5YVwRbklT0wFVJeuLu28zsuqRhMxuQdDre3QYWDBiSdDDnPNRoNCSpM1Sb9dQk7XT3EymlCUmDUaN094cppRuWc76bUhqTtD0WdJNs9j6p7UrTbH1vLumHpMfm7ktm1gqSulFK+l4AT81sTFLuV0lcHSku6Ze7z3V6MiJp3x8FuvGv51K7J8dTSlck7QmCn+4+m1K6WUj6LGlZUmPzLqyjKWmHpHEzOyeppbYjK5IepZTuSFrsoW4bMSct4DLwrntOcs4zwMj8/HzvERMTv6uqqkvA25j4tZj4SWC4r/iP7GoB5939dShYA74A08DRvrMrCC4CnyKvOik8XZblSF0pfMbdX0ThznkyWVv6Sn89GWeiBxsq2HIoppQWJD0H9pvZM0m3JC2pHYj1IM6Rk8B45zOt9SeiV/wGOQIi0SGuBx0AAAAASUVORK5CYII=";const b=e=>((0,i.Qi)("data-v-826fea2e"),e=e(),(0,i.jt)(),e),M={key:0,class:"create-chat _pop-up-white"},U={class:"create-chat-form-content"},I={class:"create-chat-title _titles"},F={class:"create-chat-avatar"},R=["src"],N={class:"create-chat-inputs"},D=b((()=>(0,i.Lk)("button",{type:"submit",class:"create-chat-btn _violet-button"},[(0,i.Lk)("img",{src:L,alt:"#"})],-1)));function E(e,t,s,o,c,r){const l=(0,i.g2)("my-input");return s.show?((0,i.uX)(),(0,i.CE)("div",M,[(0,i.Lk)("form",{onSubmit:t[3]||(t[3]=(0,n.D$)((e=>r.createGroup(s.status.action)),["prevent"])),class:"create-chat-form"},[(0,i.Lk)("div",U,[(0,i.Lk)("div",I,(0,a.v_)(s.status.title),1),(0,i.Lk)("div",F,[(0,i.Lk)("img",{src:c.imageSrc,alt:"Avatar"},null,8,R),(0,i.Lk)("input",{onChange:t[0]||(t[0]=(...e)=>r.onFileChange&&r.onFileChange(...e)),type:"file",accept:"image/*"},null,32)]),(0,i.Lk)("div",N,[(0,i.bF)(l,{placeholder:"Название",modelValue:c.chatName,"onUpdate:modelValue":t[1]||(t[1]=e=>c.chatName=e)},null,8,["modelValue"]),(0,i.bF)(l,{placeholder:"Описание (необязательно)",modelValue:c.chatDescription,"onUpdate:modelValue":t[2]||(t[2]=e=>c.chatDescription=e)},null,8,["modelValue"])])]),D],32),(0,i.Lk)("div",{onClick:t[4]||(t[4]=(...e)=>r.closeForm&&r.closeForm(...e)),class:"create-chat-close icon-arrow"})])):(0,i.Q3)("",!0)}var Q=s(1394),K=s(7844),X={data(){return{imageSrc:s(4810)}},methods:{async uploadImage(e){try{const t=(0,K.KR)(Q.I,`images/${e.name}`),s={cacheControl:"public, max-age=900",contentType:e.type};await(0,K.D)(t,e,s);const i=await(0,K.qk)(t);this.imageSrc=i}catch(t){console.log(t)}}}},x={data(){return{chatName:"",chatDescription:"",imageSrc:s(4810)}},mixins:[X],methods:{async onFileChange(e){const t=e.target.files[0];t&&(await this.uploadImage(t),e.target.value="")},cleaning(){this.chatName="",this.chatDescription="",this.imageSrc=s(4810)},createGroup(e){const t={name:this.chatName,imgSrc:this.imageSrc,description:this.chatDescription,type:e};this.$store.dispatch("createChat",t),this.$emit("update:show",!1),this.cleaning()},closeForm(){this.$emit("update:show",!1),this.cleaning()}},props:{show:{type:Boolean,default:!1},status:{type:Object,required:!0}}},T=s(1241);const W=(0,T.A)(x,[["render",E],["__scopeId","data-v-826fea2e"]]);var j=W;const V=e=>((0,i.Qi)("data-v-e7715cfa"),e=e(),(0,i.jt)(),e),H={class:"_pop-up-white user-setting"},q={class:"user-setting-content"},J=V((()=>(0,i.Lk)("div",{style:{"font-size":"16px"},class:"user-setting-close icon-arrows"},null,-1))),O=V((()=>(0,i.Lk)("div",{class:"user-setting-title _titles"}," Настройки акаунта",-1))),B=[J,O],G={class:"user-setting-body"},P={class:"user-setting-body-content"},z={class:"user-setting-avatar"},Z={alt:"Avatar"},Y={class:"user-setting-info"},_=V((()=>(0,i.Lk)("div",{class:"user-setting-info-type _btns-tabs-names_in_msgs"},"Имя",-1))),$={class:"user-setting-info-title _btns-tabs-names_in_msgs"},ee={class:"user-setting-info"},te=V((()=>(0,i.Lk)("div",{class:"user-setting-info-type _btns-tabs-names_in_msgs"},"Email",-1))),se={class:"user-setting-info-title _btns-tabs-names_in_msgs"},ie=V((()=>(0,i.Lk)("img",{src:L,alt:"#"},null,-1))),ae=[ie];function oe(e,t,o,n,c,r){const l=(0,i.gN)("lazy");return(0,i.uX)(),(0,i.CE)("div",H,[(0,i.Lk)("div",q,[(0,i.Lk)("div",{onClick:t[0]||(t[0]=t=>e.$store.commit("SetShowUserSetting",!1)),class:"user-setting-top"},B),(0,i.Lk)("div",G,[(0,i.Lk)("div",P,[(0,i.Lk)("div",z,[(0,i.bo)((0,i.Lk)("img",Z,null,512),[[l,r.myInfo.imgSrc?r.myInfo.imgSrc:s(4810)]]),(0,i.Lk)("input",{onChange:t[1]||(t[1]=(...e)=>r.onFileChange&&r.onFileChange(...e)),type:"file",accept:"image/*"},null,32)]),(0,i.Lk)("div",Y,[_,(0,i.Lk)("div",$,(0,a.v_)(r.myInfo.name),1)]),(0,i.Lk)("div",ee,[te,(0,i.Lk)("div",se,(0,a.v_)(r.myInfo.email),1)])]),(0,i.Lk)("button",{onClick:t[2]||(t[2]=t=>e.$store.dispatch("logout")),style:{"background-color":"red"},type:"submit",class:"_violet-button"},ae)])])])}var ne={data(){return{imageSrc:s(4810)}},computed:{myInfo(){return this.$store.getters.myInfo}},mixins:[X],methods:{async onFileChange(e){const t=e.target.files[0];t&&(await this.uploadImage(t),this.$store.dispatch("changeMyInfoImgSrc",this.imageSrc),e.target.value="")}}};const ce=(0,T.A)(ne,[["render",oe],["__scopeId","data-v-e7715cfa"]]);var re=ce,le=s(782),he={data(){return{showChatMenu:!1,showCreateChat:!1,showSearchBlock:!1,createChatStatus:{},chatDropDownItems:[{imgSrc:"icon-user",title:"Создать личный чат",action:"chat"},{imgSrc:"icon-group",title:"Создать группу",action:"groups"},{imgSrc:"icon-megaphone",title:"Создать канал",action:"canals"}]}},computed:{infoSaitMode(){return this.$store.getters.infoSaitMode},infoShowUserSetting(){return this.$store.getters.infoShowUserSetting},infoWindow(){return this.$store.getters.infoWindow},infoUsers(){return this.$store.getters.infoUsers},infoMyChats(){return this.$store.getters.infoMyChats},infoSearchQuery(){return this.$store.getters.infoSearchQuery},infoGroups(){return this.$store.getters.infoGroups},infoCanals(){return this.$store.getters.infoCanals},...(0,le.L8)({sortedAndSearchedPosts:"sortedAndSearchedPosts"})},mounted(){document.addEventListener("click",(e=>{e.target.closest(".messenger-left-users-input-items")||!0!==this.showSearchBlock||e.target.closest(".inputshow")||(this.showSearchBlock=!1,this.$store.commit("SetSearchQuery",""))}))},methods:{myAlert(){alert("Данный функцианал еще в разработке и работает на данный момент только настройки и темный режим")},...(0,le.PY)({SetSearchQuery:"SetSearchQuery"}),openCreateChat(e){this.showCreateChat=!0,this.createChatStatus=e},createGroup(e){this.$store.dispatch("createChat",e)}},components:{CreateChat:j,UserSetting:re}};const de=(0,T.A)(he,[["render",w],["__scopeId","data-v-9f3e6276"]]);var ue=de;const me={key:0,class:"messenger-chat"},pe={ref:"messagesContainer",class:"main-chat-body"},ge={key:1,class:"enter-in-chat _pop-up"};function fe(e,t,s,o,c,r){const l=(0,i.g2)("ChatSing"),h=(0,i.g2)("my-chat-report"),d=(0,i.g2)("my-dropdown"),u=(0,i.g2)("CreateChatReport"),m=(0,i.g2)("CreateFileMessage"),p=(0,i.g2)("AddUserInChat");return r.infoFullActiveChat?((0,i.uX)(),(0,i.CE)("div",me,[(0,i.bF)(l),(0,i.Lk)("div",{class:"main-chat",style:(0,a.Tr)({position:r.myInfo.uid!=r.fetchMeInChat&&"canals"==r.infoFullActiveChat.type?"relative":"initial"})},[(0,i.Lk)("div",pe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.infoActiveChat,(e=>((0,i.uX)(),(0,i.Wv)(h,{onContextmenu:(0,n.D$)((t=>r.openContextMenu(t,e)),["prevent"]),onDblclick:t=>r.openContextMenu(t,e),chatReport:e,key:e.id,id:e.id,class:(0,a.C4)({highlight:c.highlight===e.id}),onGoMessage:r.goToMessage},null,8,["onContextmenu","onDblclick","chatReport","id","class","onGoMessage"])))),128)),(0,i.bF)(d,{show:c.showMenu,"onUpdate:show":t[0]||(t[0]=e=>c.showMenu=e),chatDropDownItems:c.chatDropDownItems,onMyaction:r.messageMethods,style:(0,a.Tr)({top:`${c.y}px`,left:`${c.x}px`,right:"auto"})},null,8,["show","chatDropDownItems","onMyaction","style"])],512),(0,i.bF)(u,{infoWindow:r.infoFullActiveChat},null,8,["infoWindow"]),"file"==r.infoShowPopUp||"photo"==r.infoShowPopUp?((0,i.uX)(),(0,i.Wv)(m,{key:0})):(0,i.Q3)("",!0),(0,i.bF)(p),"canals"==r.infoFullActiveChat.type&&r.myInfo.uid!=r.fetchMeInChat?((0,i.uX)(),(0,i.CE)("div",ge,[(0,i.Lk)("button",{onClick:t[1]||(t[1]=t=>e.$store.dispatch("addNewUserInChat",r.myInfo)),type:"button",class:"_blue-button enter-in-chat"},"Присоедениться к группе")])):(0,i.Q3)("",!0)],4)])):(0,i.Q3)("",!0)}const Ce=e=>((0,i.Qi)("data-v-da34a3b8"),e=e(),(0,i.jt)(),e),ve={class:"chat-sing-wrapper"},ke={class:"chat-sign"},ye={class:"chat-sign-info"},Ae={alt:"#"},Se={class:"chat-sign-info-block"},we={style:{color:"black"},class:"chat-sign-info-name _btns-tabs-names_in_msgs"},Le={key:0,class:"chat-sign-info-status _main"},be={class:"chat-sign-control"},Me={class:"chat-sign-control-block"},Ue={class:"chat-sign-control-block"},Ie={class:"notice-btn-icon-img chat-sign-control-block-item"},Fe=Ce((()=>(0,i.Lk)("span",{style:{"font-size":"30px"},class:"icon-notification"},null,-1))),Re={key:0,class:"_my-status notice-btn-icon-img-status"},Ne=Ce((()=>(0,i.Lk)("img",{src:L,alt:"#"},null,-1))),De=[Ne],Ee={key:3,class:"chat-sign-search"},Qe={class:"chat-sign-search-body"},Ke=["onClick"];function Xe(e,t,o,n,c,r){const l=(0,i.g2)("ChatSetting"),h=((0,i.g2)("CallComponent"),(0,i.g2)("my-input")),d=(0,i.gN)("lazy");return(0,i.uX)(),(0,i.CE)("div",ve,[(0,i.Lk)("div",ke,[(0,i.Lk)("div",ye,[(0,i.Lk)("div",{onDblclick:t[0]||(t[0]=(...t)=>e.click&&e.click(...t)),class:"chat-sign-info-img"},[(0,i.bo)((0,i.Lk)("img",Ae,null,512),[[d,e.infoFullActiveChat.imgSrc?e.infoFullActiveChat.imgSrc:s(9096)]])],32),(0,i.Lk)("div",Se,[(0,i.Lk)("div",we,(0,a.v_)(e.infoFullActiveChat.name),1),"chatUsers"==e.infoFullActiveChat.type?((0,i.uX)(),(0,i.CE)("div",Le,(0,a.v_)(r.getMinutesSinceLastSeen),1)):(0,i.Q3)("",!0)])]),(0,i.Lk)("div",be,[(0,i.Lk)("div",Me,[(0,i.Lk)("div",{onClick:t[1]||(t[1]=(...e)=>r.myAlert&&r.myAlert(...e)),class:"chat-sign-control-block-item icon-phone"}),(0,i.Lk)("div",{onClick:t[2]||(t[2]=(...e)=>r.myAlert&&r.myAlert(...e)),class:"chat-sign-control-block-item icon-video"})]),(0,i.Lk)("div",Ue,[(0,i.Lk)("div",{style:{opacity:"0.5","font-size":"28px"},onClick:t[3]||(t[3]=t=>{e.SetShowChatSearch(!1===e.showChatSearch),e.SetChatSearch("")}),class:"chat-sign-control-block-item icon-lupa"}),(0,i.Lk)("div",{style:{opacity:"0.5","font-size":"28px"},onClick:t[4]||(t[4]=t=>e.$store.commit("SetShowChatSetting",!0)),class:"chat-sign-control-block-item icon-dots"})])])]),e.$store.state.messeng.showNotification?(0,i.Q3)("",!0):((0,i.uX)(),(0,i.CE)("div",{key:0,onClick:t[5]||(t[5]=t=>e.$store.commit("showNotification",!0)),class:"notice-btn-icon"},[(0,i.Lk)("div",Ie,[Fe,e.infoNotice.length>0?((0,i.uX)(),(0,i.CE)("div",Re)):(0,i.Q3)("",!0)])])),e.infoShowChatSetting?((0,i.uX)(),(0,i.Wv)(l,{key:1})):(0,i.Q3)("",!0),(0,i.Lk)("div",{onClick:t[6]||(t[6]=(...e)=>r.clearChat&&r.clearChat(...e)),class:"leave-in-chat _violet-button"},De),(0,i.Q3)("",!0),e.showChatSearch?((0,i.uX)(),(0,i.CE)("div",Ee,[(0,i.bF)(h,{"model-value":e.chatSearch,"onUpdate:modelValue":e.SetChatSearch,placeholder:"Поиск",class:(0,a.C4)({"input-not-empty":""!=e.chatSearch})},null,8,["model-value","onUpdate:modelValue","class"]),(0,i.Lk)("div",Qe,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(e.chatSearchFilter(e.activeChat),(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.id,class:"chat-sign-search-item _btns-tabs-names_in_msgs",onClick:t=>r.chatSearchItemClick(e.id)},[(0,i.Lk)("span",null,(0,a.v_)(e.title),1)],8,Ke)))),128))])])):(0,i.Q3)("",!0)])}const xe=e=>((0,i.Qi)("data-v-0b27e5f6"),e=e(),(0,i.jt)(),e),Te={class:"chat-setting"},We={class:"chat-setting-content"},je=xe((()=>(0,i.Lk)("div",{class:"chat-setting-top-title _titles"},"Настройки чата",-1))),Ve={class:"chat-setting-info"},He={alt:"Avatar Img",class:"chat-setting-info-img"},qe={class:"chat-setting-info-name _chats-title"},Je={class:"chat-setting-info-type _btns-tabs-names_in_msgs"},Oe={key:0,class:"chat-setting-body"},Be=xe((()=>(0,i.Lk)("div",{class:"chat-setting-title _titles"},"Участники",-1))),Ge={class:"chat-setting-items"},Pe={class:"chat-setting-item-block"},ze={alt:"Avatar Img",class:"chat-setting-item-img"},Ze={class:"chat-setting-item-name _btns-tabs-names_in_msgs"},Ye={key:0,class:"_btns-tabs-names_in_msgs"};function _e(e,t,o,n,c,r){const l=(0,i.g2)("my-button"),h=(0,i.gN)("lazy");return(0,i.uX)(),(0,i.CE)("div",Te,[(0,i.Lk)("div",We,[je,(0,i.Lk)("div",Ve,[(0,i.bo)((0,i.Lk)("img",He,null,512),[[h,r.infoFullActiveChat.imgSrc?r.infoFullActiveChat.imgSrc:s(9096)]]),(0,i.Lk)("div",qe,(0,a.v_)(r.infoFullActiveChat.name),1),(0,i.Lk)("div",Je,(0,a.v_)("groups"==r.infoFullActiveChat.type?"Группа":"canals"==r.infoFullActiveChat.type?"Канал":"chatUsers"==r.infoFullActiveChat.type?"Пользователь":"Личный чат"),1)]),"groups"==r.infoFullActiveChat.type||"canals"==r.infoFullActiveChat.type?((0,i.uX)(),(0,i.CE)("div",Oe,[Be,(0,i.Lk)("div",Ge,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(r.fetchChatsParticipants,(e=>((0,i.uX)(),(0,i.CE)("div",{class:"chat-setting-item",key:e.id},[(0,i.Lk)("div",Pe,[(0,i.bo)((0,i.Lk)("img",ze,null,512),[[h,e.imgSrc?e.imgSrc:s(9096)]]),(0,i.Lk)("div",Ze,(0,a.v_)(e.name),1)]),!0===this.fetchMeAcaunt[0].admin?((0,i.uX)(),(0,i.Wv)(l,{key:0,onClick:t=>r.deleteParticipants(e)},{default:(0,i.k6)((()=>[(0,i.eW)("Удалить")])),_:2},1032,["onClick"])):(0,i.Q3)("",!0)])))),128)),r.fetchChatsParticipants.length<=0?((0,i.uX)(),(0,i.CE)("div",Ye,"Вы единственный пользователь")):(0,i.Q3)("",!0)]),!0===this.fetchMeAcaunt[0].admin?((0,i.uX)(),(0,i.Wv)(l,{key:0,onClick:t[0]||(t[0]=t=>e.$store.commit("setShowAddUserInChat",!0))},{default:(0,i.k6)((()=>[(0,i.eW)("Добавить пользователя")])),_:1})):(0,i.Q3)("",!0),(0,i.bF)(l,{onClick:t[1]||(t[1]=t=>e.$store.dispatch("deleteChatParticipants",r.fetchMeAcaunt[0])),style:{"background-color":"red","margin-top":"10px"}},{default:(0,i.k6)((()=>[(0,i.eW)("Выйти из чата")])),_:1})])):(0,i.Q3)("",!0),(0,i.Lk)("div",{onClick:t[2]||(t[2]=(...e)=>r.closeChatSetting&&r.closeChatSetting(...e)),class:"create-chat-close icon-arrow"})])])}var $e={computed:{infoShowChatSetting(){return this.$store.getters.infoShowChatSetting},infoFullActiveChat(){return this.$store.getters.infoFullActiveChat},infoUsers(){return this.$store.getters.infoUsers},fetchChatsParticipants(){if("groups"==this.infoFullActiveChat.type||"canals"==this.infoFullActiveChat.type)return this.infoUsers.filter((e=>this.infoFullActiveChat.usersChat.some((t=>e.id===t.uid))))},fetchMeAcaunt(){return this.infoFullActiveChat.usersChat.filter((e=>e.uid===Q.j.lastNotifiedUid))}},methods:{closeChatSetting(){this.$store.commit("SetShowChatSetting",!1)},deleteParticipants(e){this.$store.dispatch("deleteChatParticipants",e)}}};const et=(0,T.A)($e,[["render",_e],["__scopeId","data-v-0b27e5f6"]]);var tt=et;const st=(0,i.Lk)("audio",{id:"remoteAudio",autoplay:""},null,-1);function it(e,t,s,a,o,n){return(0,i.uX)(),(0,i.CE)("div",null,[(0,i.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.startCall&&n.startCall(...e))},"Позвонить"),(0,i.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.acceptCall&&n.acceptCall(...e))},"Принять звонок"),st])}var at=s(7617),ot={data(){return{localStream:null,remoteStream:null,peerConnection:null,callId:"uniqueCallId"}},methods:{async startCall(){this.peerConnection=new RTCPeerConnection,this.peerConnection.onicecandidate=this.handleIceCandidate,this.localStream=await navigator.mediaDevices.getUserMedia({audio:!0}),this.localStream.getTracks().forEach((e=>{this.peerConnection.addTrack(e,this.localStream)}));const e=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(e),await(0,at.BN)((0,at.H9)(Q.db,"calls",this.callId),{offer:e})},async acceptCall(){const e=(0,at.H9)(Q.db,"calls",this.callId);(0,at.aQ)(e,(async t=>{const s=t.data();if(s?.offer&&"stable"===this.peerConnection.signalingState){await this.peerConnection.setRemoteDescription(new RTCSessionDescription(s.offer));const t=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(t),await(0,at.BN)(e,{answer:t})}if(s?.answer&&"closed"!==this.peerConnection.signalingState&&await this.peerConnection.setRemoteDescription(new RTCSessionDescription(s.answer)),s?.iceCandidate){const e=new RTCIceCandidate({candidate:s.iceCandidate.candidate,sdpMid:s.iceCandidate.sdpMid,sdpMLineIndex:s.iceCandidate.sdpMLineIndex});await this.peerConnection.addIceCandidate(e)}})),this.peerConnection.ontrack=e=>{const t=document.getElementById("remoteAudio");t.srcObject=e.streams[0]}}}};const nt=(0,T.A)(ot,[["render",it]]);var ct=nt,rt={computed:{...(0,le.aH)({showChatSearch:e=>e.messeng.showChatSearch,activeChat:e=>e.fetchInfo.activeChat,chatSearch:e=>e.messeng.chatSearch,infoShowChatSetting:e=>e.messeng.showChatSetting,infoNotice:e=>e.fetchInfo.notice,infoUsers:e=>e.fetchInfo.users,infoFullActiveChat:e=>e.fetchInfo.fullActiveChat}),...(0,le.L8)({chatSearchFilter:"chatSearchFilter"}),getMinutesSinceLastSeen(){const e=this.infoUsers.find((e=>e.id==this.infoFullActiveChat.id));if(null==e.lastSeen)return"Пользователь в сети";const t=new Date(e.lastSeen),s=new Date,i=s-t,a=Math.floor(i/1e3),o=Math.floor(a/60),n=Math.floor(o/60),c=Math.floor(n/24);return c>0?`Пользователь был в сети ${c} ${1===c?"день":"дня"} назад.`:n>0?`Пользователь был в сети ${n} ${1===n?"час":"часа"} назад.`:`Пользователь был в сети ${o} ${1===o?"минуту":"минуты"} назад.`}},methods:{...(0,le.PY)({SetChatSearchIdScroll:"SetChatSearchIdScroll",SetChatSearch:"SetChatSearch",SetShowChatSearch:"SetShowChatSearch"}),myAlert(){alert("Данная функцианал еще в разработке и работает на данный момент только три точки и лупа")},clearChat(){this.$store.commit("SetInfoWindow",""),this.$store.commit("SetFullActiveChat","")},chatSearchItemClick(e){this.SetChatSearch(""),this.SetShowChatSearch(!1),this.SetChatSearchIdScroll(e)}},components:{ChatSetting:tt,CallComponent:ct}};const lt=(0,T.A)(rt,[["render",Xe],["__scopeId","data-v-da34a3b8"]]);var ht=lt;const dt=e=>((0,i.Qi)("data-v-2ff20c35"),e=e(),(0,i.jt)(),e),ut={class:"main-chat-form"},mt={class:"main-chat-form-file"},pt={class:"main-chat-form--input"},gt=dt((()=>(0,i.Lk)("svg",{width:"24.004883",height:"24.000000",viewBox:"0 0 24.0049 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[(0,i.Lk)("desc",null," Created with Pixso. "),(0,i.Lk)("defs"),(0,i.Lk)("path",{id:"send",d:"M7.16 4.81L21.16 0.28C22.66 -0.22 24.85 -0.42 23.66 2.8C22.46 6.02 19.16 16.55 17.66 21.42C17.11 23.18 15.66 25.94 14.16 21.92L11.66 14.87L17.16 6.82L9.16 12.36L2.16 9.84C0.66 9.34 -1.84 7.83 2.16 6.32L7.16 4.81Z",fill:"#8D46F6","fill-opacity":"1.000000","fill-rule":"evenodd"})],-1))),ft=[gt];function Ct(e,t,s,a,o,c){const r=(0,i.g2)("my-dropdown"),l=(0,i.g2)("my-input"),h=(0,i.g2)("VoiceRecorder"),d=(0,i.g2)("ReplyToMessage");return(0,i.uX)(),(0,i.CE)("div",ut,[(0,i.Lk)("div",mt,[(0,i.Lk)("div",{class:"icon-paper-clip",onClick:t[0]||(t[0]=(0,n.D$)((e=>o.showChatMenu=!0),["stop"])),style:{cursor:"pointer",opacity:"0.2"}}),(0,i.bF)(r,{class:"main-chat-form-dropdown",show:o.showChatMenu,"onUpdate:show":t[1]||(t[1]=e=>o.showChatMenu=e),chatDropDownItems:o.chatDropDownItems,onMyaction:c.openFileAndImgSubmit},null,8,["show","chatDropDownItems","onMyaction"])]),(0,i.Lk)("div",pt,[(0,i.bF)(l,{modelValue:o.sendText,"onUpdate:modelValue":t[2]||(t[2]=e=>o.sendText=e),placeholder:"Ведите сообщение...",onKeyup:t[3]||(t[3]=(0,n.jR)((e=>c.createReport(s.infoWindow)),["enter"]))},null,8,["modelValue"])]),(0,i.bF)(h),(0,i.Lk)("button",{onClick:t[4]||(t[4]=e=>c.createReport(s.infoWindow)),type:"submit",class:"main-chat-form-submit"},ft),c.infoReplyMessage?((0,i.uX)(),(0,i.Wv)(d,{key:0})):(0,i.Q3)("",!0)])}var vt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAa1JREFUOI3F1L9uE0EQx/HPXowDIuFPBAQhJKCggpKHSISoQEI00CBRgXgAHoKel+AZ6EDp6AhS0iA5DWlQMMbxUOyAnYvtuGOlk+52Zr/329/uTDFlBAUruIXraDL0C9voFfrT1namTaLQPCFeYJUY5PRZfCHeBFuFmApMRedwKudWiOfEJ7zH79R+mfIUj/EtGKrPoPADOlG3s45nuIIlXMQ1fMd9HKaAVWKN8oA4g0ECvwbvCqNO+tOhWWO0nt9BfEjIpdaudojd/GlJYG+qcUGJ8QGcOIIm7fo3mongEjZoXi4KpHmFjVx7FFiZ7hCP2n+doa4QD3HXxGm3gY3qzfI8aMaWjX08Dsw71VdPdNV8L5vMOUS/zFAogUO1SuZt+28lDbUqpg38mUmLKhzmmpnASYUnAf+PwoNMOr8A8ELmHswD7hN93DS7E8nYjczdbwcmRw+fKZvETrBrfJWoFXG6wsom8VGrjo9cjajJtylviRElu0mMMj0bSXTre7zG9mSzPXbXoqpexz1cRdfYmpHasnrYwl6pPk5XmMCSgG5usZ0TacEAo3bX/gOEOIbk9ojvlwAAAABJRU5ErkJggg==";const kt=e=>((0,i.Qi)("data-v-4956e314"),e=e(),(0,i.jt)(),e),yt={class:"main-chat-form-voice"},At=["disabled"],St={key:0,class:"main-chat-form-voice-block"},wt=["disabled"],Lt={class:"main-chat-form-voice-time"},bt=kt((()=>(0,i.Lk)("svg",{width:"22.055176",height:"22.944763",viewBox:"0 0 22.0552 22.9448",fill:"none",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},[(0,i.Lk)("desc",null," Created with Pixso. "),(0,i.Lk)("defs"),(0,i.Lk)("path",{id:"send",d:"M7.43 2.79L20.3 9.03C21.69 9.68 23.37 11.04 20.41 12.57C17.44 14.11 8.18 19.56 3.92 22.1C2.37 23.02 -0.48 24.04 1.11 20.08L3.99 13.22L13.17 11.08L3.88 9.68L0.59 3.06C-0.13 1.67 -0.91 -1.14 2.91 0.49L7.43 2.79Z",fill:"#8D46F6","fill-opacity":"1.000000","fill-rule":"evenodd"})],-1))),Mt=[bt],Ut=kt((()=>(0,i.Lk)("div",null,null,-1)));function It(e,t,s,o,n,c){return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.Lk)("div",yt,[(0,i.Lk)("span",{class:"icon-mic",style:{cursor:"pointer",opacity:"0.2"},onClick:t[0]||(t[0]=(...e)=>c.startRecording&&c.startRecording(...e)),disabled:n.isRecording},null,8,At),n.isRecording?((0,i.uX)(),(0,i.CE)("div",St,[(0,i.Lk)("img",{onClick:t[1]||(t[1]=(...e)=>c.stopRecording&&c.stopRecording(...e)),disabled:!n.isRecording,src:vt,alt:"delete"},null,8,wt),(0,i.Lk)("div",Lt,(0,a.v_)(c.formattedTimer),1),(0,i.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>c.submitUploadAudio&&c.submitUploadAudio(...e))},Mt)])):(0,i.Q3)("",!0)]),Ut],64)}s(4114);var Ft={data(){return{isRecording:!1,mediaRecorder:null,audioChunks:[],audioUrl:null,timer:0,timerInterval:null}},computed:{formattedTimer(){const e=String(Math.floor(this.timer/60)).padStart(2,"0"),t=String(this.timer%60).padStart(2,"0");return`${e}:${t}`},infoFullActiveChat(){return this.$store.getters.infoFullActiveChat}},methods:{async startRecording(){const e=await navigator.mediaDevices.enumerateDevices(),t=e.filter((e=>"audioinput"===e.kind));if(!t.length>0)return void alert("Микрофон неподключен!");const s=await navigator.mediaDevices.getUserMedia({audio:!0});this.mediaRecorder=new MediaRecorder(s),this.mediaRecorder.start(),this.mediaRecorder.ondataavailable=e=>{this.audioChunks.push(e.data)},this.isRecording=!0,this.timer=0,this.startTimer()},submitUploadAudio(){this.stopRecording(),this.mediaRecorder.onstop=async()=>{await this.uploadAudio(this.infoFullActiveChat)}},stopRecording(){this.timer=0,this.mediaRecorder.stop(),this.isRecording=!1,clearInterval(this.timerInterval),this.audioChunks=[]},async uploadAudio(e){const t=new Blob(this.audioChunks,{type:"audio/wav"}),s=(0,K.KR)(Q.I,`voiceMessages/${Date.now()}.wav`);await(0,K.D)(s,t);const i=await(0,K.qk)(s),a={date:(new Date).toTimeString().slice(0,5),audioUrl:i,type:"audio",user:e};await this.$store.dispatch("addNewReport",a)},startTimer(){this.timerInterval=setInterval((()=>{this.timer+=1}),1e3)}}};const Rt=(0,T.A)(Ft,[["render",It],["__scopeId","data-v-4956e314"]]);var Nt=Rt;const Dt={class:"reply-message"},Et={class:"reply-message-report"},Qt={class:"reply-message-name"},Kt={class:"reply-message-type"};function Xt(e,t,s,o,n,c){return(0,i.uX)(),(0,i.CE)("div",Dt,[(0,i.Lk)("div",Et,[(0,i.Lk)("div",Qt,(0,a.v_)(c.infoReplyMessageUser.name),1),(0,i.Lk)("div",Kt,(0,a.v_)(c.infoReplyMessage.title),1)]),(0,i.Lk)("div",{style:{color:"#99C0F0","font-size":"20px"},onClick:t[0]||(t[0]=(...e)=>c.clearInfo&&c.clearInfo(...e)),class:"reply-message-delete icon-close"})])}var xt={computed:{infoReplyMessage(){return this.$store.getters.infoReplyMessage},infoReplyMessageUser(){return this.$store.getters.infoReplyMessageUser}},methods:{clearInfo(){this.$store.commit("SetreplyMessage",""),this.$store.commit("SetReplyMessageUser","")}}};const Tt=(0,T.A)(xt,[["render",Xt],["__scopeId","data-v-d918d01c"]]);var Wt=Tt,jt={data(){return{sendText:"",showChatMenu:!1,chatDropDownItems:[{imgSrc:"icon-multimedia-file",title:"Фото или видео",action:"photo"},{imgSrc:"icon-file",title:"Файл",action:"file"}]}},props:{infoWindow:{type:Object}},components:{VoiceRecorder:Nt,ReplyToMessage:Wt},methods:{async createReport(e){const t={title:this.sendText,date:(new Date).toTimeString().slice(0,5),user:e};this.infoReplyMessage&&(t.replyMessage={name:this.infoReplyMessageUser.name,text:this.infoReplyMessage.title,id:this.infoReplyMessage.id}),0!=this.sendText.length?(await this.$store.dispatch("addNewReport",t),this.sendText="",this.$store.commit("SetreplyMessage",""),this.$store.commit("SetReplyMessageUser","")):alert("Ведите сообщение...")},openFileAndImgSubmit(e){this.$store.commit("showPopUp",e.action)}},computed:{infoReplyMessage(){return this.$store.getters.infoReplyMessage},infoReplyMessageUser(){return this.$store.getters.infoReplyMessageUser}}};const Vt=(0,T.A)(jt,[["render",Ct],["__scopeId","data-v-2ff20c35"]]);var Ht=Vt,qt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAMBJREFUOI2l1L0KwkAMwPE/jgVnwVnwAa7Prw/Q4lYoVBA6OfgO59ArjfTaS2Lglvv4DUkuABVwB674IwAtcAK4ATEtDxrE+5aERHyoxCJwng8kOijRTUyiTyUagHe6+8hhFrTWYhrUjO2hbkyiQwJG4PMPJtGRpZJdCTsUwCPTT5qjSnuukDnrgBe2Pt3E5pzJnJrQvWqaUU1rqNGapZql1iiiFiyH/kwpiWWnRgFdjb7GieXQHqax3TgxifbA5Qt2xWm5+b9UdQAAAABJRU5ErkJggg==";const Jt=e=>((0,i.Qi)("data-v-2779af9d"),e=e(),(0,i.jt)(),e),Ot={class:"_pop-up-top"},Bt=Jt((()=>(0,i.Lk)("img",null,null,-1))),Gt=Jt((()=>(0,i.Lk)("div",{class:"chat-files-form-top-title _titles"},"Отправить файл",-1))),Pt={class:"chat-files-form-body"},zt={class:"chat-files-form-file-block"},Zt=["src","alt"],Yt={class:"chat-files-form-texts"},_t={class:"chat-files-form-name"},$t={class:"chat-files-form-weight"},es=["onClick"],ts={class:"chat-files-form-addfile"},ss={class:"chat-files-form-end"};function is(e,t,s,o,c,r){const l=(0,i.g2)("my-input"),h=(0,i.g2)("my-button");return(0,i.uX)(),(0,i.CE)("div",{class:"main-chat-popup _pop-up",onClick:t[6]||(t[6]=(...e)=>r.closePopUp&&r.closePopUp(...e))},[(0,i.Lk)("form",{onSubmit:t[4]||(t[4]=(0,n.D$)((e=>r.createFileMessage(r.infoFullActiveChat)),["prevent"])),onClick:t[5]||(t[5]=(0,n.D$)((()=>{}),["stop"])),class:"chat-files-form _pop-up-body"},[(0,i.Lk)("div",Ot,[(0,i.Lk)("span",{onClick:t[0]||(t[0]=(0,n.D$)(((...e)=>r.closePopUp&&r.closePopUp(...e)),["stop"])),class:"chat-files-form-close icon-arrow"}),Bt,Gt]),(0,i.Lk)("div",Pt,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(c.fileArray,(e=>((0,i.uX)(),(0,i.CE)("div",{key:e.name,class:"chat-files-form-file"},[(0,i.Lk)("div",zt,["photo"==r.infoShowPopUp?((0,i.uX)(),(0,i.CE)("img",{key:0,src:e.imgSrc,alt:e.name,class:"main-chat-text-file-img"},null,8,Zt)):(0,i.Q3)("",!0),(0,i.Lk)("div",Yt,[(0,i.Lk)("div",_t,(0,a.v_)(e.name),1),(0,i.Lk)("div",$t,(0,a.v_)(e.size),1)])]),(0,i.Lk)("img",{onClick:t=>r.deleteFile(e),class:"chat-files-form-file-delete",src:qt,alt:"delete file"},null,8,es)])))),128))]),(0,i.Lk)("div",ts,[(0,i.Lk)("div",null,["photo"==r.infoShowPopUp?((0,i.uX)(),(0,i.CE)("input",{key:0,onChange:t[1]||(t[1]=(...e)=>r.onFileChange&&r.onFileChange(...e)),type:"file",accept:"image/*, video/*"},null,32)):(0,i.Q3)("",!0),"file"==r.infoShowPopUp?((0,i.uX)(),(0,i.CE)("input",{key:1,onChange:t[2]||(t[2]=(...e)=>r.onFileChange&&r.onFileChange(...e)),type:"file"},null,32)):(0,i.Q3)("",!0),(0,i.eW)(" Добавить файл ")])]),(0,i.Lk)("div",ss,[(0,i.bF)(l,{placeholder:"Добавить подпись...",modelValue:c.signature,"onUpdate:modelValue":t[3]||(t[3]=e=>c.signature=e),class:"chat-files-form-input"},null,8,["modelValue"]),(0,i.bF)(h,{type:"submit",class:"chat-files-form-btn"},{default:(0,i.k6)((()=>[(0,i.eW)("Отправить")])),_:1})])],32)])}var as={data(){return{signature:"",fileArray:[],imageSrc:""}},mixins:[X],methods:{async onFileChange(e){const t=e.target.files[0];if(t){await this.uploadImage(t);const s={name:t.name,size:t.size};s.imgSrc=this.imageSrc,this.fileArray.push(s),e.target.value=""}},deleteFile(e){this.fileArray=[...this.fileArray.filter((t=>t.url!=e.url))]},closePopUp(){this.$store.commit("showPopUp",""),this.fileArray=[],this.signature=""},createFileMessage(e){const t={title:this.signature,date:(new Date).toTimeString().slice(0,5),files:this.fileArray,type:this.infoShowPopUp,user:e};0!=this.fileArray.length?(this.$store.dispatch("addNewReport",t),this.closePopUp()):alert("Добавьте файл!")}},computed:{infoFullActiveChat(){return this.$store.getters.infoFullActiveChat},infoShowPopUp(){return this.$store.getters.infoShowPopUp}}};const os=(0,T.A)(as,[["render",is],["__scopeId","data-v-2779af9d"]]);var ns=os;const cs=e=>((0,i.Qi)("data-v-c6384a16"),e=e(),(0,i.jt)(),e),rs={class:"_pop-up-top"},ls=cs((()=>(0,i.Lk)("div",{class:"_titles"},"Пользвотали",-1))),hs={class:"add-user-group-block"},ds={class:"add-user-group-users"},us={class:"add-user-group-user-block"},ms=["src"],ps={style:{color:"#000"},class:"_btns-tabs-names_in_msgs"};function gs(e,t,o,c,r,l){const h=(0,i.g2)("my-input"),d=(0,i.g2)("my-button");return l.infoShowAddUserInChat?((0,i.uX)(),(0,i.CE)("div",{key:0,onClick:t[3]||(t[3]=(...e)=>l.closePopUp&&l.closePopUp(...e)),class:"add-user-group _pop-up"},[(0,i.Lk)("div",{onClick:t[2]||(t[2]=(0,n.D$)((()=>{}),["stop"])),class:"add-user-group-body _pop-up-body"},[(0,i.Lk)("div",rs,[(0,i.Lk)("span",{onClick:t[0]||(t[0]=(0,n.D$)(((...e)=>l.closePopUp&&l.closePopUp(...e)),["stop"])),class:"chat-files-form-close icon-arrow"}),ls]),(0,i.Lk)("div",hs,[(0,i.bF)(h,{class:(0,a.C4)({"input-not-empty":""!=r.searchQuery}),modelValue:r.searchQuery,"onUpdate:modelValue":t[1]||(t[1]=e=>r.searchQuery=e),style:{"padding-left":"15px"},placeholder:"Поиск..."},null,8,["class","modelValue"]),(0,i.Lk)("div",ds,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(l.sortedSearchNotParticipantsUsers,(t=>((0,i.uX)(),(0,i.CE)("div",{class:"add-user-group-user",key:t.id},[(0,i.Lk)("div",us,[(0,i.Lk)("img",{src:t.imgSrc?t.imgSrc:s(9096),alt:"Avatar Img"},null,8,ms),(0,i.Lk)("div",ps,(0,a.v_)(t.name),1)]),(0,i.bF)(d,{onClick:s=>e.$store.dispatch("addNewUserInChat",t)},{default:(0,i.k6)((()=>[(0,i.eW)("Добавить")])),_:2},1032,["onClick"])])))),128))])])])])):(0,i.Q3)("",!0)}var fs={data(){return{searchQuery:""}},computed:{infoUsers(){return this.$store.getters.infoUsers},infoFullActiveChat(){return this.$store.getters.infoFullActiveChat},infoShowAddUserInChat(){return this.$store.getters.infoShowAddUserInChat},sortedNotParticipantsUsers(){return this.infoUsers.filter((e=>{let t=!0;return this.infoFullActiveChat.usersChat.forEach((s=>e.id!==s.uid||(t=!1))),t}))},sortedSearchNotParticipantsUsers(){return this.sortedNotParticipantsUsers.filter((e=>e.name.toLowerCase().includes(this.searchQuery.toLowerCase())))}},methods:{closePopUp(){this.$store.commit("setShowAddUserInChat",!1),this.searchQuery=""}}};const Cs=(0,T.A)(fs,[["render",gs],["__scopeId","data-v-c6384a16"]]);var vs=Cs,ks={data(){return{highlight:"",showMenu:!1,report:{},x:0,y:0,chatDropDownItems:[{imgSrc:"icon-send-forward",title:"Ответить",action:"answerBack"},{imgSrc:"icon-copy",title:"Копировать",action:"copy"},{imgSrc:"icon-delete",title:"Удалить",action:"delete"}]}},components:{ChatSing:ht,CreateChatReport:Ht,CreateFileMessage:ns,AddUserInChat:vs},methods:{openContextMenu(e,t){this.showMenu=!0,this.report=t,this.x=e.clientX,this.y=e.clientY},handleClickOutside(e){this.showMenu&&(this.showMenu=!1)},beforeDestroy(){document.removeEventListener("click",this.handleClickOutside)},messageMethods(e){"copy"==e.action&&navigator.clipboard.writeText(this.report.title).then((()=>{alert("Текст скопирован в буфер обмена!")})).catch((e=>{console.error("Не удалось скопировать: ",e)})),"answerBack"==e.action&&(this.$store.commit("SetreplyMessage",this.report),this.$store.dispatch("fetchReplyMessageUser",this.report),this.showMenu=!1),"delete"==e.action&&this.$store.dispatch("deleteMessage",this.report)},goToMessage(e){const t=this.infoActiveChat.find((t=>t.id===e));t&&this.$nextTick((()=>{const t=document.getElementById(e);t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),this.highlight=e,setTimeout((()=>{this.highlight=""}),2e3))}))}},mounted(){document.addEventListener("click",this.handleClickOutside)},computed:{infoFullActiveChat(){return this.$store.getters.infoFullActiveChat},infoShowPopUp(){return this.$store.getters.infoShowPopUp},myInfo(){return this.$store.getters.myInfo},fetchMeInChat(){if("canals"==this.infoFullActiveChat.type){const e=this.infoFullActiveChat.usersChat.find((e=>e.uid==this.myInfo.uid));return e?e.uid:null}return!0},infoActiveChat(){return this.$nextTick((()=>{const e=this.$refs.messagesContainer;e.scrollTop=e.scrollHeight})),this.$store.getters.infoActiveChat},...(0,le.aH)({chatSearchIdScroll:e=>e.messeng.chatSearchIdScroll})},watch:{chatSearchIdScroll(e,t){this.goToMessage(e)}}};const ys=(0,T.A)(ks,[["render",fe],["__scopeId","data-v-a6d5e270"]]);var As=ys;const Ss=e=>((0,i.Qi)("data-v-6508cc26"),e=e(),(0,i.jt)(),e),ws={class:"notifications"},Ls=Ss((()=>(0,i.Lk)("div",{class:"notifications-title _titles"},"Уведомления",-1))),bs=Ss((()=>(0,i.Lk)("div",{style:{transform:"rotate(180deg)","font-size":"16px"},class:"notifications-close icon-arrows"},null,-1))),Ms=[Ls,bs],Us={class:"notifications-body"},Is={class:"notifications-setting"},Fs=Ss((()=>(0,i.Lk)("span",{style:{"font-size":"16px"},class:"icon-check-one"},null,-1)));function Rs(e,t,s,a,o,n){const c=(0,i.g2)("my-notice");return(0,i.uX)(),(0,i.CE)("div",ws,[(0,i.Lk)("div",{onClick:t[0]||(t[0]=t=>e.$store.commit("showNotification",!1)),class:"notifications-top"},Ms),(0,i.Lk)("div",Us,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(n.infoNotice,(e=>((0,i.uX)(),(0,i.Wv)(c,{notice:e,key:e.name},null,8,["notice"])))),128))]),(0,i.Lk)("div",Is,[(0,i.Lk)("div",{onClick:t[1]||(t[1]=t=>e.$store.dispatch("clearNotice")),class:"notifications-clear"},[Fs,(0,i.eW)(" Отметить прочитанными ")])])])}var Ns={props:{},computed:{infoNotice(){return this.$store.getters.infoNotice}}};const Ds=(0,T.A)(Ns,[["render",Rs],["__scopeId","data-v-6508cc26"]]);var Es=Ds,Qs={components:{MessengerLeft:ue,MessengerChat:As,Notifications:Es},data(){return{saveUsers:[{name:"Anton",date:"20:15",imgSrc:s(9096)},{name:"Oleg",date:"12:15",imgSrc:s(9096)},{name:"Gleb",date:"14:15",imgSrc:s(9096)},{name:"Sten",date:"22:15",imgSrc:s(9096)}],chatReports:[{title:"Привет!",date:"17:01",position:"rigth"},{title:"Нравится твоя идея, но мне кажется, что можно лучше",date:"17:01",position:"rigth"},{title:"Позже покажу, как",date:"17:01",position:"rigth"},{title:"ОК. Давай вместе сделаем что-то крутое",date:"17:01",position:"left"},{title:"Когда будет следующее занятие?",date:"17:01",position:"rigth"}],noticeArray:[{imgSrc:s(9096),name:"@Julia-teacher",text:"добавил(а) Вас в группу «Обучение анимации»",date:"5 мин. назад"},{imgSrc:s(9096),name:"@Julia-teacher",text:"исключил(а) Вас из общего чата «Обсуждение домашек»",date:"10 мин. назад"},{imgSrc:s(9096),name:"@Julia-teacher",text:"упомянул(а) Вас в личном чате",date:"5 мин. назад"}],showNotification:!1}},computed:{infoSaitMode(){return this.$store.getters.infoSaitMode},infoWindow(){return this.$store.getters.infoWindow}}};const Ks=(0,T.A)(Qs,[["render",o]]);var Xs=Ks},4810:function(e){e.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=80.e6b45d2c.js.map